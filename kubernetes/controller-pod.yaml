apiVersion: v1beta3
kind: Pod
metadata:
  name: controller
  labels:
    name: controller
spec:
  containers:
    - name: mysql
      image: docker.cern.ch/cloud-infrastructure/mysql
      env:
        - name: 'MYSQL_ROOT_PASSWORD'
          value: '123456'
      ports:
        - containerPort: 3306
    - name: rabbitmq
      image: rabbitmq
    - name: ldap
      image: docker.cern.ch/cloud-infrastructure/ldap
      env:
        - name: LDAP_ROOT_PASSWORD
          value: '123456'
        - name: LDAP_MANAGER_PASSWORD
          value: '123456'
      ports:
        - containerPort: 389
      volumeMounts:
        - name: ldif
          mountPath: /ldif
  volumes:
    - name: ldif
      hostPath:
        path: /opt/cloud-dev/docker/ldap/data
